

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>설치 &mdash; Tensorflow2 Object Detection API Install Guide 0.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="&lt;no title&gt;" href="Training.html" />
    <link rel="prev" title="들어가며" href="Intro.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Tensorflow2 Object Detection API Install Guide
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Intro.html">들어가며</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">설치</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#tensorflow2-object-detection-api">1. Tensorflow2 Object Detection API 설치하기</a></li>
<li class="toctree-l2"><a class="reference internal" href="#protobuf">2. protobuf 설치</a></li>
<li class="toctree-l2"><a class="reference internal" href="#coco-api">4. COCO API 설치</a></li>
<li class="toctree-l2"><a class="reference internal" href="#object-detection-api">5. Object Detection API 설치</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">6. 테스트</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Tensorflow2 Object Detection API Install Guide</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>설치</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/Install.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>설치<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="tensorflow2-object-detection-api">
<h2>1. Tensorflow2 Object Detection API 설치하기<a class="headerlink" href="#tensorflow2-object-detection-api" title="Permalink to this headline">¶</a></h2>
<p>Tensorflow Object Detection API의 models repository에서 제공해주는 파일의 구조는 다음과 같습니다.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>TensorFlow/
└─ models/
   ├─ community/
   ├─ official/
   ├─ orbit/
   ├─ research/
   └── ...
</pre></div>
</div>
</div></blockquote>
<dl>
<dt>우선 아래 명령어를 통해 models repository를 clone합니다.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">tensorflow</span><span class="o">/</span><span class="n">models</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="protobuf">
<h2>2. protobuf 설치<a class="headerlink" href="#protobuf" title="Permalink to this headline">¶</a></h2>
<p>제가 처음 참조했던 사이트인 (<a class="reference external" href="https://tensorflow-object-detection-api-tutorial.readthedocs.io/en/latest/">https://tensorflow-object-detection-api-tutorial.readthedocs.io/en/latest/</a>) 에서는 제가 실수한 부분이 있을 수 있겠지만 protobuf가 정상적으로 동작하지 않았습니다. 그래서 tensorflow1 으로 object detection API를 사용할 때 설치했던 버전으로 진행했습니다.</p>
<p>다음 사이트에 있는 zip파일을 다운받습니다.
(<a class="reference external" href="https://github.com/google/protobuf/releases/download/v3.3.0/protoc-3.3.0-linux-x86_64.zip">https://github.com/google/protobuf/releases/download/v3.3.0/protoc-3.3.0-linux-x86_64.zip</a>)</p>
<ul>
<li><p>받은 파일을 적절한 곳에 디렉토리를 만들고 압축을 풀어줍니다.</p></li>
<li><p>터미널에서 현재 위치를 models 밑에 research 디렉토리로 이동합니다.</p></li>
<li><p>위에서 압축해제한 proto 디렉토리의 bin까지의 경로를 기억합니다.</p></li>
<li><dl>
<dt>다음 명령어를 입력해서 에러가 나오지 않는다면 성공입니다.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PATH</span><span class="o">/</span><span class="n">TO</span><span class="o">/</span><span class="n">PROTO</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">protoc</span> <span class="n">object_detection</span><span class="o">/</span><span class="n">protos</span><span class="o">/*.</span><span class="n">proto</span> <span class="o">--</span><span class="n">python_out</span><span class="o">=.</span>
</pre></div>
</div>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="coco-api">
<h2>4. COCO API 설치<a class="headerlink" href="#coco-api" title="Permalink to this headline">¶</a></h2>
<p>처음에 저는 이런 생각이 들었습니다.
내가 COCO API안쓸건데 왜 이걸 설치해야 할까
하지만 반드시 설치해야 합니다.</p>
<dl>
<dt>아래 명령어를 입력해서 cocoapi repository를 clone합니다.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">cocodataset</span><span class="o">/</span><span class="n">cocoapi</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</dd>
</dl>
<p>터미널의 위치를 clone된 디렉토리의 cocoapi/PythonAPI 까지 이동합니다.
이후 make를 입력해 cocoapi를 빌드합니다.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span>
</pre></div>
</div>
</div></blockquote>
<dl>
<dt>빌드 후 생성된 pycocotools를 research디렉토리로 복사합니다.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="o">-</span><span class="n">r</span> <span class="n">pycocotools</span> <span class="n">PATH</span><span class="o">/</span><span class="n">TO</span><span class="o">/</span><span class="n">TENSORFLOW</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="n">research</span><span class="o">/</span>      <span class="o">//</span> <span class="p">(</span><span class="o">-</span><span class="n">r</span> <span class="n">은</span> <span class="n">해당</span> <span class="n">파일</span> <span class="n">혹은</span> <span class="n">디렉토리가</span> <span class="n">외부에서</span> <span class="n">접근중이여도</span> <span class="n">복사를</span> <span class="n">할</span> <span class="n">수</span> <span class="n">있게</span> <span class="n">해주는</span> <span class="n">옵션</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="object-detection-api">
<h2>5. Object Detection API 설치<a class="headerlink" href="#object-detection-api" title="Permalink to this headline">¶</a></h2>
<p>이 부분이 지금 문서를 작성하면서 가장 애매한 부분입니다.
제가 지금 권장하는 환경과 무언가 달라서 그럴 수 있겠는데 setup.py를 수행하는 순간 파일이 깨지는 현상이 발생했고 복구도 되지 않았습니다.
그래서 다시 처음부터 세팅 후 setup.py를 수행하지 않고 진행했는데 현재 잘 사용하고 있습니다.
이 부분에 대해서 이유를 아신다면 알려주세요.</p>
</div>
<div class="section" id="id2">
<h2>6. 테스트<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<dl>
<dt>google의 tensorflow팀은 친절하게도 정상적으로 설치가 되었는지 테스트를 할 수 있는 파일을 제공해줍니다.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">object_detection</span><span class="o">/</span><span class="n">builders</span><span class="o">/</span><span class="n">model_builder_tf2_test</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</dd>
<dt>해당 테스트에서 일부 파일이 없다고 말하는 경우가 있을텐데 아래 2개의 명령어를 입력해 환경변수를 잡아준 후 그래도 요구하는건 pip install로 설치를 하면 됩니다.(해당 터미널이나 서버를 재부팅할때마다 환경을 새로 잡으라고 요구할텐데 batch파일로 하나 만들어두는게 편합니다.)</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export PYTHONPATH=$PYTHONPATH:PATH/TO/TENSORFLOW/models/research:PATH/TO/TENSORFLOW/models/research/slim
export PYTHONPATH=$PYTHONPATH:PATH/TO/TENSORFLOW/models/
</pre></div>
</div>
</dd>
<dt>배치 파일을 만드는 방법은 nano나 gedit이나 vim 등을 이용해서 파일을 하나 만든 다음 가장 위에 아래 예약어를 붙여줍니다.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
</pre></div>
</div>
</dd>
<dt>배치파일의 실행은 . 명령어로 실행하면 됩니다.</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ex</span><span class="p">)</span><span class="o">.</span> <span class="n">set_path</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</dd>
</dl>
<p>환경변수를 잡으라고 하는 경우는 다음 모듈을 못찾겠다고 하는 경우입니다. (정확히 어떤 것들인지는 잘 기억이 나지 않으나 해당 디렉토리 밑에 있는 파일들을 참조할 때 입니다. 그떄 그때 구글링을 추천드립니다..)
object_detection, slim …</p>
<p>테스트가 잘 끝나면 아래와 비슷하게 나옵니다.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="p">[</span>       <span class="n">OK</span> <span class="p">]</span> <span class="n">ModelBuilderTF2Test</span><span class="o">.</span><span class="n">test_create_ssd_models_from_config</span>
<span class="p">[</span> <span class="n">RUN</span>      <span class="p">]</span> <span class="n">ModelBuilderTF2Test</span><span class="o">.</span><span class="n">test_invalid_faster_rcnn_batchnorm_update</span>
<span class="p">[</span>       <span class="n">OK</span> <span class="p">]</span> <span class="n">ModelBuilderTF2Test</span><span class="o">.</span><span class="n">test_invalid_faster_rcnn_batchnorm_update</span>
<span class="p">[</span> <span class="n">RUN</span>      <span class="p">]</span> <span class="n">ModelBuilderTF2Test</span><span class="o">.</span><span class="n">test_invalid_first_stage_nms_iou_threshold</span>
<span class="p">[</span>       <span class="n">OK</span> <span class="p">]</span> <span class="n">ModelBuilderTF2Test</span><span class="o">.</span><span class="n">test_invalid_first_stage_nms_iou_threshold</span>
<span class="p">[</span> <span class="n">RUN</span>      <span class="p">]</span> <span class="n">ModelBuilderTF2Test</span><span class="o">.</span><span class="n">test_invalid_model_config_proto</span>
<span class="p">[</span>       <span class="n">OK</span> <span class="p">]</span> <span class="n">ModelBuilderTF2Test</span><span class="o">.</span><span class="n">test_invalid_model_config_proto</span>
<span class="p">[</span> <span class="n">RUN</span>      <span class="p">]</span> <span class="n">ModelBuilderTF2Test</span><span class="o">.</span><span class="n">test_invalid_second_stage_batch_size</span>
<span class="p">[</span>       <span class="n">OK</span> <span class="p">]</span> <span class="n">ModelBuilderTF2Test</span><span class="o">.</span><span class="n">test_invalid_second_stage_batch_size</span>
<span class="p">[</span> <span class="n">RUN</span>      <span class="p">]</span> <span class="n">ModelBuilderTF2Test</span><span class="o">.</span><span class="n">test_session</span>
<span class="p">[</span>  <span class="n">SKIPPED</span> <span class="p">]</span> <span class="n">ModelBuilderTF2Test</span><span class="o">.</span><span class="n">test_session</span>
<span class="p">[</span> <span class="n">RUN</span>      <span class="p">]</span> <span class="n">ModelBuilderTF2Test</span><span class="o">.</span><span class="n">test_unknown_faster_rcnn_feature_extractor</span>
<span class="p">[</span>       <span class="n">OK</span> <span class="p">]</span> <span class="n">ModelBuilderTF2Test</span><span class="o">.</span><span class="n">test_unknown_faster_rcnn_feature_extractor</span>
<span class="p">[</span> <span class="n">RUN</span>      <span class="p">]</span> <span class="n">ModelBuilderTF2Test</span><span class="o">.</span><span class="n">test_unknown_meta_architecture</span>
<span class="p">[</span>       <span class="n">OK</span> <span class="p">]</span> <span class="n">ModelBuilderTF2Test</span><span class="o">.</span><span class="n">test_unknown_meta_architecture</span>
<span class="p">[</span> <span class="n">RUN</span>      <span class="p">]</span> <span class="n">ModelBuilderTF2Test</span><span class="o">.</span><span class="n">test_unknown_ssd_feature_extractor</span>
<span class="p">[</span>       <span class="n">OK</span> <span class="p">]</span> <span class="n">ModelBuilderTF2Test</span><span class="o">.</span><span class="n">test_unknown_ssd_feature_extractor</span> <span class="o">----------------------------------------------------------------------</span>
<span class="n">Ran</span> <span class="mi">20</span> <span class="n">tests</span> <span class="ow">in</span> <span class="mf">68.510</span><span class="n">s</span>
<span class="n">OK</span> <span class="p">(</span><span class="n">skipped</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="Training.html" class="btn btn-neutral float-right" title="&lt;no title&gt;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="Intro.html" class="btn btn-neutral float-left" title="들어가며" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, BernoYoun.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>